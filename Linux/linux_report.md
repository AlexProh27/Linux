# Операционные системы UNIX/Linux (Базовый).
1. [Установка ОС](#part-1-установка-ос)
2. [Создание пользователя](#part-2-создание-пользователя)
3. [Настройка сети ОС](#part-3-настройка-сети-ос)
4. [Обновление ОС](#part-4-обновление-ос)
5. [Использование команды sudo](#part-5-использование-команды-sudo)
6. [Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)
7. [Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)
8. [Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)
9. [Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)
10. [Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)
11. [Использование утилиты df](#part-11-использование-утилиты-df)
12. [Использование утилиты du](#part-12-использование-утилиты-du)
13. [Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)
14. [Работа с системными журналами](#part-14-работа-с-системными-журналами)
15. [Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)

## Part 1. Установка ОС
1. Проверка установленной версии Ubuntu:

![Ubuntu](<./scrin/1.1.png>)
    
## Part 2. Создание пользователя
1. Создание нового пользователя и добавление в группу **adm**

![duurmopa](<./scrin/2.1.png>)

2. Проверка внесения пользователя **duurmopa** в группу **adm**

![adm](<./scrin/2.2.png>)

## Part 3. Настройка сети ОС
1. Задание машине имени **user-1**.
    * Вызов команды sudo `nano /etc/hostname` для смены названия машины
    * Проверка названия машины после перезагрузки

    ![hostname](<./scrin/3.1.png>)

2. Установка временной зоны, соотвутствующей моему положению, c помощью команды.
    ```bash
    sudo dpkg-reconfigure tzdata
    ```
   ![TIME](<./scrin/3.2.png>)
3. Вывод названия сетевых интерфейсов и получение ip адреса устройства, от DHCP серверас помощью консольной команды.
    
    ![ip](<./scrin/3.3.png>)
    
##### lo - это интерфейс петли обратной связи. Одна из задач технологии обратной петли — перенаправлять исходящий системный пакет на вход системы, не давая ему попасть к OSI. Кроме того, интерфейс loopback осуществляет взаимодействие исполняемых на одном хосте процессов с сетевой подсистемой. Есть и полная схема осуществления loopback интерфейса: Сфера применения интерфейса обратной петли довольно объемная. Ее используют и в системе pfSense — дистрибутив, создающий межсетевой экран/машрутизатор. В таком случае loopback нужен в качестве метода взаимодействия между локальными процессами через сетевую подсистему.

4. Определение внешнего ip-адреса шлюза и внутреннего IP-адреса шлюза.
    * внешний ip-адрес<br>
    ![ip](<./scrin/3.4.png>)

    * внутренний ip-адрес<br>
   ![IP](<./scrin/3.5.png>)

6. Установка статичных настроек ip, gw, dns.,br.<br>
     командой `sudo nano /etc/netplan/00-installer-config.yaml` и зададим настройки ip, gw, dns.

    ![manual setting](<./scrin/3.6.png>)

7. После перезагрузки виртуальной машины настройки не изменились. Пингование удаленных хостов 1.1.1.1 и ya.ru прошло успешно.

    ![1.1.1.1](<./scrin/3.7.png>)

    ![ya.ru](<./scrin/3.8.png>)

## Part 4. Обновление ОС
1. Для обновления системных пакетов до последней на момент выполнения задания изпользуем команду `sudo apt update && sudo apt upgrade`
2. После повторного вызова данной команды получим следующий результат:
    ![update](<./scrin/4.1.png>)
## Part 5. Использование команды sudo
1. Команда `sudo` ( substitute user and do, подменить пользователя и выполнить ) позволяет строго определенным пользователям выполнять указанные программы с административными привилегиями без ввода пароля суперпользователя. 
2. Даем права на **sudo** пользователю командой `sudo usermod -aG sudo reddevil017`.
3. Обновление hostname:

    ![update](<./scrin/5.3.png>)
## Part 6. Установка и настройка службы времени
1. При установке настройки времени были применены автоматически
##### Использованные команды:
* `timedatectl show` <br>
![TIM](<./scrin/6.1.png>)
## Part 7. Установка и использование текстовых редакторов
1. Создаем файл при помощи vim `vim test_vim.txt`  
 ![VIM](<./scrin/7.1.png>)
##### Пишем duurmopa, жмем `ESC`, пишем `:wq`
2. Создаем файл при помощи nano `nano test_nano.txt`  
![NANO](<./scrin/7.2.png>)
##### Пишем duurmopa, жмем `control+x`, жмем `y`, `enter`
3. Устанавливаем редактор JOE командой `sudo apt install joe`

    ![JOE](<./scrin/7.3.png>)
##### Создаем файл при помощи JOE `joe test_joe.txt` 

4. Открываем файл при помощи vim `vim test_vim.txt`  
![VIM](<./scrin/7.4.png>)<br>  
##### Пишем `:21 School 21` <br>
##### Для выхода без сохранения пишем `:q!`
5. Открываем файл при помощи nano `nano test_nano.txt`  
![NANO](<./scrin/7.5.png>)
##### Пишем `:21 School 21` <br>
##### Для выхода без сохранения жмём `control+X`, `N`, `enter`
6. Открываем файл при помощи JOE `joe test_joe.txt`  
 ![JOE](<./scrin/7.6.png>)
##### Пишем 21 School 21. <br>
7. Для поиска при помощи vim открываем файл и пишем `/` после текст для поиска
8. Для поиска при помощи nano открываем файл и жмем `control + W` после текст для поиска
9. Для поиска при помощи joe открываем файл жмем `control + G` после текст для поиска
## Part 8. Установка и базовая настройка сервиса SSHD
1. Устанавливаем службу SSHd

    ![SSHD](<./scrin/8.1.png>)

2. Делаем автозагрузку командой `sudo systemctl enable sshd`
3. Для изменения порта на 2022 требуется отредактировать файл nano /etc/ssh/sshd_config, меняем `#Port 22` на `Port 2022` <br>
![SSHD](<./scrin/8.2.png>)

4. Для применения изменений `/etc/init.d/ssh restart`
5. **sshd** - это служба, принимающая запросы на соединения от клиентов. Обычно он запускается при загрузке системы из /etc/rc. Для каждого нового соединения создаётся (с помощью вызова fork) новый экземпляр службы. Ответвлённый экземпляр обрабатывает обмен ключами, шифрование, аутентификацию, выполнение команд и обмен данными.
6. Проверка наличия процесса sshd `ps -ef | grep sshd`  
![SSHD](<./scrin/8.6.png>)

Опции: 
-e, показывает все процессы.
-f показывает полную информацию.
UID - идентификатор пользователя выполняющего команду.
PID - это идентификатор процесса команды.
PPID - идентификатор родительского процесса, который отпустил команду.
C - количество дочерних процессов.
STIME - это время начала процесса.

7. Устанавливаем и запускаем `sudo apt install net-tools`, далее команда `netstat -tan`
![netstat](<./scrin/8.7.png>)

- a - показывать состояние всех сокетов. Обычно сокеты, используемые серверными процессами, не показываются.
- t - просмотр только tcp соединений
- n - показывать сетевые адреса как числа. netstat обычно показывает адреса как символы. Эту опцию можно использовать с любым форматом показа.

## Part 9. Установка и использование утилит top, htop
* Для установки пишем `sudo apt install htop`
* Запускаем `top`<br>
![TOP](<./scrin/9.1.png>)
    - uptime: 3:31
    - количество авторизованных пользователей: 1
    - общая загрузка системы: 0,03, 0,03, 0,00
    - общее количество процессов: 96
    - загрузка памяти: 154,9
    - pid процесса занимающего больше всего памяти: 1
    - pid процесса, занимающего больше всего процессорного времени: 11
* Запускаем и сортируем `htop`
    * **PID** <br>
    ![PID](<./scrin/9.2.png>)
    * **PERCENT_CPU** <br>
    ![PERCENT_CPU](<./scrin/9.3.png>)
    * **PERCENT_MEM** <br>
   ![PERCENT_MEM](<./scrin/9.4.png>)
    * **TIME** <br>
   ![TIME](<./scrin/9.5.png>)
    *  **sshd** <br>
    ![sshd](<./scrin/9.6.png>)
    * **через поиск находим  syslog** <br>
    ![syslog](<./scrin/9.7.png>)
    * **с добавленным выводом hostname, clock и uptime** <br>
    ![hostname, clock и uptime](<./scrin/9.8.png>)
## Part 10. Использование утилиты fdisk
* Для запуска утилиты fdisk пишем `sudo fdisk -l` <br>
    ![fdisk](<./scrin/10.png>)
* Из вывода мы видим, что название диска `sda`, его размер`10 GiB`, секторов`20971520`, это же и есть размер swap 
## Part 11. Использование утилиты df
* Запускаем утилиту df<br>
    - размер раздела: 8408452
    - размер занятого пространства: 4121424
    - размер свободного пространства: 3838312
    - процент использования: 52%
    - единицы измерения пространства: Килобайты

    ![df](<./scrin/11.1.png>)
  
* Запускаем утилиту df -Th`<br>
    - размер раздела: 8.1G
    - размер занятого пространства: 4.0G
    - размер свободного пространства: 3.7G
    - процент использования: 52%
    - тип файловой системы раздела: ext4

    ![df -Th](<./scrin/11.2.png>)
- T - Выдавать тип для каждой файловой системы. Тип берётся от операционной системы (и определяется системно-зависимым способом, например посредством чтения файла /etc/mtab).
- h - Отобразит размер в человеко-читаемом формате, размерностью 1024, добавив названия единиц (Kибибайт, Mебибайт, Гибибайт, Tебибайт).
    
## Part 12. Использование утилиты du
* Запускаем утилиту du<br>
    ![du](<./scrin/12.1.png>)
* Вывести размер папок /home, /var, /var/log <br>
    ![du](<./scrin/12.2.png>)
* Вывести размер всего содержимого в /var/log <br>
    ![du](<./scrin/12.3.png>)
## Part 13. Установка и использование утилиты ncdu
* Устанавливаем ncdu <br>
    ![ncdu](<./scrin/12.4.png>)
* Запускаем ncdu<br>
    ![ncdu](<./scrin/12.5.png>)
* Вывожу размер папки /home с посощью команды `sudo ncdu /home`<br>
    ![ncdu](<./scrin/12.6.png>)
* Вывожу размер папки /var с помощью команды `sudo ncdu /var`<br>
    ![ncdu](<./scrin/12.7.png>)
* Вывожу размер папки /var/log с помощью команды `sudo ncdu /var.log`<br>
![ncdu](<./scrin/12.8.png>)
## Part 14. Работа с системными журналами
* Время последней успешной авторизации, имя пользователя и метод входа в систему<br>
![system logs](<./scrin/14.1.png>)
* Перезапустить службу SSHd и показать логи<br>
![system logs](<./scrin/14.2.png>)
## Part 15. Использование планировщика заданий CRON
* Установка cron и работа в фоновом режиме<br>
![CRON](<./scrin/15.1.png>)
* Редактируем`crontab -e`
* Назначаем команду для запуска каждые 2 минуты `*/2 * * * * uptime`<br>
* Проверяем текущие задачи cron<br>
![uptime](<./scrin/15.2.png>)
* Удаляем текущие задачи<br>
![uptime](<./scrin/15.3.png>)